<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/allhouse.css">
    <script src="js/header.js"></script>
    <script src="js/allhouse.js"></script>
    <script src="js/component/jiarunav.js"></script>

</head>

<body>
    <div id="app">
        <jiarunav></jiarunav>
        <div class="allhouse">
            <!-- 上方搜索框 -->
            <div>
                <div class="ui center aligned basic segment search">
                    <img class="logo" src="img/logo.png" />
                    <div class="ui icon input">
                        <input class="prompt" type="text" placeholder="西二旗...">
                        <i class="search icon"></i>
                    </div>
                    <div class="results"></div>
                </div>
            </div>
            <!-- 条件选择栏 -->
            <div class="condition-box ui raised segment">
                <ul class="clearfix">
                    <dl class="tab-item ui segment" v-for="(tab,index) in tabs">
                        <span class="condition-name">{{tab.name}}:</span>
                        <dd v-for="(tabitem,indexitem) in tab.items">
                            <a href="#" class="tab-link" @click="tabsSwitch(index,indexitem)" v-bind:class="{active:tabitem.isActive}">{{tabitem.name}}</a>
                        </dd>
                    </dl>
                </ul>
            </div>
            <!-- 房屋展示部分 -->
            <div v-for="item in house_items" class="ui divided items segment">
                <div class="item">
                    <div class="image">
                        <img :src="item.img">
                    </div>
                    <div class="content">
                        <a class="header">{{item.name}}</a>
                        <img width="64" height="15" alt="" src="http://static8.ziroom.com/phoenix/pc/images/201810/img_deepbreath_unselected_90_2x2.png">
                        <div class="meta">
                            <span class="cinema">{{item.annote}}</span>
                        </div>
                        <div class="description">
                            <p></p>
                        </div>
                        <div class="extra">
                            <div class="ui label">IMAX</div>
                            <div class="ui label"><i class="globe icon"></i> 附加的语言</div>
                            <div class="ui right floated house_right">
                                <div class="ui six wide column price">${{item.price}}</div>
                                <div class="ui default button">
                                    查看更多
                                    <i class="ui right chevron icon"></i>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
            <!-- 页码条 -->
            <div class="page_num_box">
                <a href="#" v-for="(item, index) in $data.page_num" class="page_num_item" @click="pageSwitch(index)"
                    v-bind:class="{active:item.isActive}">
                    {{item.num}}
                </a>
            </div>
        </div>

    </div>
</body>

<script>
    var va = new Vue({
        el: '#app',
        data: {
            house_items: [],
            page_num: [],
            tabs: [{
                name: "面积",
                items: [{
                    name: "不限",
                    isActive: true
                }, {
                    name: "10平米以下",
                    isActive: false
                }, {
                    name: "10-20平米",
                    isActive: false
                }, {
                    name: "20-30平米",
                    isActive: false
                }, {
                    name: "30平米以上",
                    isActive: false
                }, ]
            }, {
                name: "价格",
                items: [{
                    name: "不限",
                    isActive: true
                }, {
                    name: "2000以下",
                    isActive: false
                }, {
                    name: "2000~4000",
                    isActive: false
                }, {
                    name: "4000以上",
                    isActive: false
                }, ]
            }, {
                name: "面积",
                items: [{
                    name: "不限",
                    isActive: true
                }, {
                    name: "10平米以下",
                    isActive: false
                }, {
                    name: "10-20平米",
                    isActive: false
                }, {
                    name: "20-30平米",
                    isActive: false
                }, {
                    name: "30平米以上",
                    isActive: false
                }, ]
            }]

        },
        methods: {
            tabsSwitch: function (index, tabIndex) {
                var items = this.$data.tabs[index].items;

                items[tabIndex].isActive = true;

                for (var itemindex in items) {
                    if (itemindex == tabIndex)
                        continue;
                    items[itemindex].isActive = false;
                }
            },
            pageSwitch: function (pageIndex) {
                var items = this.$data['page_num'];

                this.$set(items[pageIndex], "isActive", true)

                for (var itemindex in items) {
                    if (itemindex == pageIndex)
                        continue;

                    this.$set(this.$data['page_num'][itemindex], "isActive", false);
                }
                //ajax
            }
        },
        created: function () {
            var da = g_ajax_post('/house');
            this.house_items = da;
            var page_num = 1;
            this.$data['page_num'] = [];
            for (var i = 1; i < 8; i++) {
                item = {};
                item['num'] = i;
                item['isActive'] = false;
                this.$data['page_num'].push(item);

            }
            this.$data['page_num'][1]['isActive'] = true;
            //this.$data.page_num.push('...');
        },



    });
</script>

</html>